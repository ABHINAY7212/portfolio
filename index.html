<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dyavadi Abhinay Reddy - Portfolio</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e2e8f0; /* Lighter, cooler gray background */
            color: #2d3748; /* Darker text for better readability */
            line-height: 1.7;
            scroll-behavior: smooth; /* Smooth scrolling for anchor links */
        }
        .container {
            max-width: 1000px; /* Slightly wider container */
        }
        .section-title {
            @apply text-4xl font-extrabold text-gray-800 mb-8 pb-3 relative;
        }
        .section-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 80px; /* Wider underline */
            height: 5px;
            background-color: #4299e1; /* Blue underline */
            border-radius: 2px;
        }
        .card {
            @apply bg-white p-8 rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 ease-in-out border border-gray-100; /* More rounded, pronounced shadow, subtle border */
        }
        .project-link {
            @apply text-blue-600 hover:text-blue-800 font-semibold transition-colors duration-200 underline; /* Underline for links */
        }
        .button-primary {
            @apply bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-full font-bold hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 shadow-lg transform hover:-translate-y-1; /* Gradient, full rounded, bold, subtle lift */
        }
        .button-primary:disabled {
            @apply bg-gray-400 from-gray-400 to-gray-500 cursor-not-allowed transform-none shadow-none; /* Disable gradient and transform for disabled state */
        }
        /* Header specific styling for a subtle gradient animation */
        header {
            background-size: 200% 200%;
            animation: gradient-animation 15s ease infinite; /* Slower animation */
        }
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        /* Link styling in header for consistency */
        header a {
            @apply px-4 py-2 rounded-lg hover:bg-white hover:bg-opacity-25 transition-colors duration-200 text-lg;
        }
        /* Specific list item styling for skills and experience */
        .list-disc li {
            padding-left: 0.75rem; /* Add more padding for list items */
            margin-bottom: 0.5rem; /* Space between list items */
        }
        .list-disc {
            list-style-type: disc; /* Ensure disc style */
            padding-left: 1.5rem; /* Indent for list */
        }
        .skill-category-title {
            @apply text-xl font-bold text-gray-700 mb-3;
        }
        .skill-list-item {
            @apply text-gray-600 text-base;
        }
        /* Responsive adjustments for skill grid */
        @media (min-width: 640px) {
            .skills-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1024px) {
            .skills-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        .project-action-buttons {
            @apply flex space-x-3 mt-4;
        }
        .project-action-button {
            @apply bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-300 transition-colors duration-200;
        }
        .project-action-button:disabled {
            @apply bg-gray-100 text-gray-400 cursor-not-allowed;
        }
        .project-output-area {
            @apply mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg text-base leading-relaxed text-gray-700 shadow-inner;
        }
        .project-loading-indicator {
            @apply mt-2 text-blue-600 text-sm;
        }
        .project-error-message {
            @apply mt-2 p-2 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 sm:p-8">

        <!-- Header Section -->
        <header class="text-center mb-16 py-10 bg-gradient-to-r from-blue-600 via-purple-700 to-indigo-800 text-white rounded-3xl shadow-2xl">
            <h1 class="text-5xl sm:text-6xl font-extrabold mb-3 tracking-tight">DYAVADI ABHINAY REDDY</h1>
            <p class="text-2xl sm:text-3xl font-light opacity-90">Aspiring Data Engineer & Data Analyst</p>
            <div class="flex flex-wrap justify-center space-x-4 sm:space-x-6 mt-6">
                <a href="https://www.linkedin.com/in/dyavadi-abhinay-reddy-738628310?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200 text-lg">LinkedIn</a>
                <a href="https://github.com/ABHINAY7212/Abhinay7212.github.io.git" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200 text-lg">GitHub</a>
                <a href="https://abhinay7212.github.io/portfolio/" target="_blank" class="text-white hover:text-blue-200 transition-colors duration-200 text-lg">Portfolio</a>
                <a href="mailto:abhinayreddydyavadi@gmail.com" class="text-white hover:text-blue-200 transition-colors duration-200 text-lg">Email</a>
                <span class="text-white text-lg">+918639579221</span>
            </div>
        </header>

        <!-- Summary Section -->
        <section id="summary" class="mb-16 card">
            <h2 class="section-title">Summary</h2>
            <p id="original-summary-text" class="text-lg leading-relaxed text-gray-700">
                Detail-oriented and aspiring Junior Data Engineer with a strong foundation in database management, data pipeline development, and cloud data platforms. Proficient in Python and SQL, with practical experience in data extraction, transformation, and loading (ETL), data modeling, and ensuring data quality. Eager to leverage skills in building robust data infrastructures and contributing to data-driven solutions. Holds a Bachelor of Technology in Artificial Intelligence and Data Science, complemented by a Google Cloud Data Analytics certification.
            </p>
        </section>

        <!-- LLM-Powered Feature: Tailor Summary -->
        <section id="llm-summary-tailor" class="mb-16 card">
            <h2 class="section-title">âœ¨ Tailor Summary for a Job Role</h2>
            <div class="mb-6">
                <label for="job-role-input" class="block text-gray-700 text-xl font-medium mb-3">Enter a Job Role to Customize Your Summary:</label>
                <input type="text" id="job-role-input" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-blue-400 text-lg shadow-sm" placeholder="e.g., Power BI Developer, Junior Data Engineer">
            </div>
            <button id="tailor-summary-btn" class="button-primary">Generate Tailored Summary</button>
            <div id="loading-indicator" class="mt-6 text-blue-600 font-medium text-lg hidden">Generating...</div>
            <div id="tailored-summary-output" class="mt-8 p-6 bg-blue-50 border border-blue-200 rounded-xl text-lg leading-relaxed text-gray-800 shadow-inner hidden">
                <!-- Tailored summary will be displayed here -->
            </div>
            <div id="error-message" class="mt-6 p-4 bg-red-100 border border-red-300 rounded-lg text-red-700 hidden">
                <!-- Error messages will be displayed here -->
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="mb-16 card">
            <h2 class="section-title">Skills</h2>
            <div class="grid skills-grid gap-8 text-lg">
                <div>
                    <h3 class="skill-category-title">Data Engineering</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>ETL/ELT Processes</li>
                        <li>Data Pipeline Development</li>
                        <li>Data Modeling (Relational)</li>
                        <li>Data Quality</li>
                        <li>Database Management</li>
                        <li>Data Integration</li>
                        <li>Web Scraping</li>
                    </ul>
                </div>
                <div>
                    <h3 class="skill-category-title">Databases</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>SQL (MySQL)</li>
                        <li>Database Design</li>
                        <li>Query Optimization</li>
                    </ul>
                </div>
                <div>
                    <h3 class="skill-category-title">Cloud Platforms</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>Google Cloud Data Analytics</li>
                    </ul>
                </div>
                <div>
                    <h3 class="skill-category-title">Programming Languages</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>Python (Pandas, NumPy)</li>
                        <li>JavaScript (Basic)</li>
                        <li>HTML, CSS</li>
                    </ul>
                </div>
                <div>
                    <h3 class="skill-category-title">Tools & Platforms</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>Power BI</li>
                        <li>Microsoft Excel</li>
                        <li>Scikit-learn</li>
                        <li>Matplotlib</li>
                        <li>Seaborn</li>
                    </ul>
                </div>
                <div>
                    <h3 class="skill-category-title">Concepts & Soft Skills</h3>
                    <ul class="list-disc list-inside space-y-1 skill-list-item">
                        <li>Data Structures</li>
                        <li>Data Preprocessing</li>
                        <li>Data Mining</li>
                        <li>Analytical Thinking</li>
                        <li>Problem-Solving</li>
                        <li>Collaboration</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Experience Section -->
        <section id="experience" class="mb-16 card">
            <h2 class="section-title">Experience</h2>
            <div class="space-y-8">
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">Data Analyst Intern | Innobyte Services</h3>
                    <p class="text-gray-600 text-lg">Hyderabad, Telangana | August 2024 â€“ September 2024</p>
                    <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                        <li>Performed comprehensive data cleaning, analysis, and visualization of Amazon sales data utilizing Python and Power BI, focusing on data quality and preparation for insights.</li>
                        <li>Gained practical experience in handling real-world datasets, ensuring data integrity and consistency for downstream processes.</li>
                        <li>Demonstrated strong dedication and professionalism in project execution and collaborative team environments.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">AI Intern | CollegeTips.in</h3>
                    <p class="text-gray-600 text-lg">July 2024 â€“ August 2024</p>
                    <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                        <li>Developed a machine learning model to effectively predict fake news from a given dataset, involving data collection and initial preprocessing.</li>
                        <li>Exhibited punctuality, strong work ethic, and an inquisitive approach, valuable for complex data challenges.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">Data Science Virtual Intern | CodeAlpha</h3>
                    <p class="text-gray-600 text-lg">Virtual | February 2025 â€“ May 2025</p>
                    <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                        <li>Actively participated in a Data Science Virtual Internship Program, with a focus on data manipulation and preparation.</li>
                        <li>Showcased dedication and strong work ethic in tasks related to data understanding and preliminary feature engineering.</li>
                        <li>Quickly acquired new skills and adapted to emerging technologies, demonstrating high productivity in virtual environments.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="mb-16 card">
            <h2 class="section-title">Projects</h2>
            <div class="space-y-10">
                <div class="project-item">
                    <h3 class="text-2xl font-semibold text-gray-800">Retail Sales and Customer Segmentation Analysis</h3>
                    <p class="text-gray-600 text-lg mb-3">
                        <a href="https://github.com/ABHINAY7212/codealpha_tasks.git" target="_blank" class="project-link">GitHub Repository</a>
                    </p>
                    <div id="project-retail-sales-original" class="project-description-original hidden">
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Managed and integrated large datasets (transactional and customer behavior data) to create a unified data source for analysis.</li>
                            <li>Performed extensive data cleaning and transformation, including handling missing values and outliers, and feature engineering (extracting `pack size` and `brand` from unstructured `PROD_NAME`) to prepare data for further insights.</li>
                            <li>Utilized Python (Pandas, NumPy) for data manipulation and aggregation, demonstrating capability in preparing data pipelines for business intelligence.</li>
                            <li>Generated insights on sales trends and customer segments, illustrating end-to-end data processing from raw data to actionable information.</li>
                        </ul>
                    </div>
                    <div id="project-retail-sales-display" class="project-output-area">
                        <!-- Initial display or summarized content -->
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Managed and integrated large datasets (transactional and customer behavior data) to create a unified data source for analysis.</li>
                            <li>Performed extensive data cleaning and transformation, including handling missing values and outliers, and feature engineering (extracting `pack size` and `brand` from unstructured `PROD_NAME`) to prepare data for further insights.</li>
                            <li>Utilized Python (Pandas, NumPy) for data manipulation and aggregation, demonstrating capability in preparing data pipelines for business intelligence.</li>
                            <li>Generated insights on sales trends and customer segments, illustrating end-to-end data processing from raw data to actionable information.</li>
                        </ul>
                    </div>
                    <div class="project-action-buttons">
                        <button class="project-action-button" data-project-id="retail-sales" data-action="summarize">âœ¨ Summarize</button>
                        <button class="project-action-button" data-project-id="retail-sales" data-action="expand">âœ¨ Expand Details</button>
                    </div>
                    <div id="project-retail-sales-loading" class="project-loading-indicator hidden">Generating...</div>
                    <div id="project-retail-sales-error" class="project-error-message hidden"></div>
                </div>

                <div class="project-item">
                    <h3 class="text-2xl font-semibold text-gray-800">Data Preprocessing and Feature Scaling for Machine Learning</h3>
                    <p class="text-gray-600 text-lg mb-3">
                        <a href="https://github.com/ABHINAY7212/codealpha_tasks.git" target="_blank" class="project-link">GitHub Repository</a>
                    </p>
                    <div id="project-data-preprocessing-original" class="project-description-original hidden">
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Developed a robust Python script for comprehensive data preprocessing, including handling missing values (median imputation) and dynamic cleaning of column names, essential for data quality in pipelines.</li>
                            <li>Implemented key feature scaling techniques (StandardScaler and MinMaxScaler) using Scikit-learn, demonstrating understanding of preparing numerical data for efficient processing and model consumption.</li>
                            <li>Successfully performed train-test splits on datasets, ensuring proper data partitioning for reliable pipeline evaluation and downstream ML tasks.</li>
                        </ul>
                    </div>
                    <div id="project-data-preprocessing-display" class="project-output-area">
                        <!-- Initial display or summarized content -->
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Developed a robust Python script for comprehensive data preprocessing, including handling missing values (median imputation) and dynamic cleaning of column names, essential for data quality in pipelines.</li>
                            <li>Implemented key feature scaling techniques (StandardScaler and MinMaxScaler) using Scikit-learn, demonstrating understanding of preparing numerical data for efficient processing and model consumption.</li>
                            <li>Successfully performed train-test splits on datasets, ensuring proper data partitioning for reliable pipeline evaluation and downstream ML tasks.</li>
                        </ul>
                    </div>
                    <div class="project-action-buttons">
                        <button class="project-action-button" data-project-id="data-preprocessing" data-action="summarize">âœ¨ Summarize</button>
                        <button class="project-action-button" data-project-id="data-preprocessing" data-action="expand">âœ¨ Expand Details</button>
                    </div>
                    <div id="project-data-preprocessing-loading" class="project-loading-indicator hidden">Generating...</div>
                    <div id="project-data-preprocessing-error" class="project-error-message hidden"></div>
                </div>

                <div class="project-item">
                    <h3 class="text-2xl font-semibold text-gray-800">A/B Testing Simulation for Statistical Significance</h3>
                    <p class="text-gray-600 text-lg mb-3">
                        <a href="https://github.com/ABHINAY7212/codealpha_tasks.git" target="_blank" class="project-link">GitHub Repository</a>
                    </p>
                    <div id="project-ab-testing-original" class="project-description-original hidden">
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Simulated an A/B testing scenario, demonstrating understanding of data-driven experimentation and statistical validation of data insights.</li>
                            <li>Conducted t-tests to evaluate the statistical significance of observed differences between groups, a skill transferable to validating data quality or pipeline performance changes.</li>
                        </ul>
                    </div>
                    <div id="project-ab-testing-display" class="project-output-area">
                        <!-- Initial display or summarized content -->
                        <ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">
                            <li>Simulated an A/B testing scenario, demonstrating understanding of data-driven experimentation and statistical validation of data insights.</li>
                            <li>Conducted t-tests to evaluate the statistical significance of observed differences between groups, a skill transferable to validating data quality or pipeline performance changes.</li>
                        </ul>
                    </div>
                    <div class="project-action-buttons">
                        <button class="project-action-button" data-project-id="ab-testing" data-action="summarize">âœ¨ Summarize</button>
                        <button class="project-action-button" data-project-id="ab-testing" data-action="expand">âœ¨ Expand Details</button>
                    </div>
                    <div id="project-ab-testing-loading" class="project-loading-indicator hidden">Generating...</div>
                    <div id="project-ab-testing-error" class="project-error-message hidden"></div>
                </div>
            </div>
        </section>

        <!-- Education Section -->
        <section id="education" class="mb-16 card">
            <h2 class="section-title">Education</h2>
            <div class="space-y-6">
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">Bachelor of Technology in Artificial Intelligence and Data Science</h3>
                    <p class="text-gray-600 text-lg">St Peter's Engineering College, Hyderabad, Telangana</p>
                    <p class="text-gray-600 text-base">November 2021 â€“ Ongoing | Expected Graduation: May 2025</p>
                    <p class="text-gray-700 text-base">Aggregate CGPA: 8.0/10.0</p>
                    <p class="text-gray-700 text-base">Relevant Coursework: Database Management Systems, Data Structures, Data Mining, Programming Concepts, Machine Learning.</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">Intermediate (12th Grade)</h3>
                    <p class="text-gray-600 text-lg">Narayana Junior College, [City, Telangana]</p>
                    <p class="text-gray-600 text-base">June 2019 â€“ April 2021</p>
                    <p class="text-gray-700 text-base">Aggregate Percentage: 97.4% | Specialization: MPC (Mathematics, Physics, Chemistry)</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold text-gray-800">Secondary School Certificate (10th Grade)</h3>
                    <p class="text-gray-600 text-lg">Sri Chaitanya, [City, Telangana]</p>
                    <p class="text-gray-600 text-base">Graduated March 2019</p>
                    <p class="text-gray-700 text-base">Score: 10/10</p>
                </div>
            </div>
        </section>

        <!-- Certifications Section -->
        <section id="certifications" class="mb-16 card">
            <h2 class="section-title">Certifications</h2>
            <ul class="list-disc list-inside space-y-3 text-lg text-gray-700">
                <li><a href="https://www.credly.com/badges/d3e47666-dc96-43b0-bf70-f20475057d45/linked_in?t=sol9r1" target="_blank" class="project-link">Google Cloud Data Analytics Certificate</a> | Credly</li>
                <li>Data Analytics and Visualization Job Simulation | Accenture (via Forage) | June 2024</li>
                <li>Data Science Job Simulation | BCGX (via Forage) | June 2024</li>
                <li>Data Science Job Simulation | British Airways (via Forage) | March 2025</li>
                <li>Data Analysis with Python | IBM SkillsBuild | November 2023</li>
                <li>Data Visualization with Power BI | Great Learning Academy | May 2024</li>
                <li>Backend Development Course Program | Pw Skills | March 2024</li>
            </ul>
        </section>

        <!-- Footer Section -->
        <footer class="text-center text-gray-600 mt-16 py-8 border-t border-gray-300">
            <p class="text-base">&copy; 2025 Dyavadi Abhinay Reddy. All rights reserved.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tailorSummaryBtn = document.getElementById('tailor-summary-btn');
            const jobRoleInput = document.getElementById('job-role-input');
            const originalSummaryText = document.getElementById('original-summary-text').innerText;
            const tailoredSummaryOutput = document.getElementById('tailored-summary-output');
            const loadingIndicator = document.getElementById('loading-indicator');
            const errorMessage = document.getElementById('error-message');

            tailorSummaryBtn.addEventListener('click', async () => {
                const jobRole = jobRoleInput.value.trim();

                if (!jobRole) {
                    errorMessage.textContent = "Please enter a job role to tailor your summary.";
                    errorMessage.classList.remove('hidden');
                    tailoredSummaryOutput.classList.add('hidden');
                    return;
                }

                loadingIndicator.classList.remove('hidden');
                tailoredSummaryOutput.classList.add('hidden');
                errorMessage.classList.add('hidden');
                tailorSummaryBtn.disabled = true; // Disable button during generation

                const prompt = `Rewrite the following professional summary based on the provided resume content to be highly relevant for a "${jobRole}" position, focusing on transferable skills and experience. Keep it concise, around 50-70 words.

Original Summary:
${originalSummaryText}`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide this in runtime
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API error: ${response.status} - ${errorData.error.message || 'Unknown error'}`);
                    }

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        tailoredSummaryOutput.innerHTML = text;
                        tailoredSummaryOutput.classList.remove('hidden');
                    } else {
                        throw new Error("Unexpected API response structure or no content generated.");
                    }
                } catch (error) {
                    console.error("Error generating tailored summary:", error);
                    errorMessage.textContent = `Failed to generate summary: ${error.message}. Please try again.`;
                } finally {
                    loadingIndicator.classList.add('hidden');
                    tailorSummaryBtn.disabled = false; // Re-enable button
                }
            });

            // --- New LLM Feature: Project Summarizer/Expander ---
            document.querySelectorAll('.project-action-button').forEach(button => {
                button.addEventListener('click', async (event) => {
                    const projectId = event.target.dataset.projectId;
                    const action = event.target.dataset.action; // 'summarize' or 'expand'

                    const originalContentDiv = document.getElementById(`project-${projectId}-original`);
                    const displayArea = document.getElementById(`project-${projectId}-display`);
                    const loadingDiv = document.getElementById(`project-${projectId}-loading`);
                    const errorDiv = document.getElementById(`project-${projectId}-error`);
                    const allButtonsForProject = document.querySelectorAll(`.project-action-button[data-project-id="${projectId}"]`);

                    // Get the raw text content from the original list items
                    const originalText = Array.from(originalContentDiv.querySelectorAll('li')).map(li => li.innerText).join('\n');

                    loadingDiv.classList.remove('hidden');
                    errorDiv.classList.add('hidden');
                    displayArea.classList.add('hidden'); // Hide current content while generating
                    allButtonsForProject.forEach(btn => btn.disabled = true); // Disable all buttons for this project

                    let prompt = "";
                    if (action === 'summarize') {
                        prompt = `Summarize the following project description concisely, focusing on its key contributions and outcomes. Keep it to 2-3 bullet points.

Project Description:
${originalText}`;
                    } else if (action === 'expand') {
                        prompt = `Expand on the following project description, providing more detail on the methodologies, tools used, and specific challenges overcome. Aim for 5-7 detailed bullet points.

Project Description:
${originalText}`;
                    }

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                    const payload = { contents: chatHistory };
                    const apiKey = ""; // Canvas will automatically provide this in runtime
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(`API error: ${response.status} - ${errorData.error.message || 'Unknown error'}`);
                        }

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            const text = result.candidates[0].content.parts[0].text;
                            // Convert plain text bullet points to HTML list items
                            const htmlContent = text.split('\n').map(line => {
                                const trimmedLine = line.trim();
                                if (trimmedLine.startsWith('* ') || trimmedLine.startsWith('- ')) {
                                    return `<li>${trimmedLine.substring(2).trim()}</li>`;
                                } else if (trimmedLine.length > 0) {
                                     // Handle cases where LLM might not use bullet points consistently
                                    return `<li>${trimmedLine}</li>`;
                                }
                                return '';
                            }).filter(Boolean).join(''); // Filter out empty strings and join

                            displayArea.innerHTML = `<ul class="list-disc list-inside mt-3 space-y-2 text-gray-700 text-base">${htmlContent}</ul>`;
                            displayArea.classList.remove('hidden');
                        } else {
                            throw new Error("Unexpected API response structure or no content generated.");
                        }
                    } catch (error) {
                        console.error(`Error ${action}ing project ${projectId}:`, error);
                        errorDiv.textContent = `Failed to ${action} project: ${error.message}. Please try again.`;
                        errorDiv.classList.remove('hidden');
                        // Revert to original content if error
                        displayArea.innerHTML = originalContentDiv.innerHTML;
                        displayArea.classList.remove('hidden');
                    } finally {
                        loadingDiv.classList.add('hidden');
                        allButtonsForProject.forEach(btn => btn.disabled = false); // Re-enable buttons
                    }
                });
            });
            // --- End New LLM Feature ---
        });
    </script>
</body>
</html>
